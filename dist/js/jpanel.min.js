/**!
 * jPanel v0.1.0
 * Copyright (c) 2015 Jonathan Perez.
 * Licensed under the MIT License.
 */
!function(){var a={ROOT:"jpanel-root",NODE:"jpanel-node",TRANSITION:"jpanel-transition",HIDE:{PREFIX:"jpanel-hide-",LEFT:"jpanel-hide-left",RIGHT:"jpanel-hide-right",TOP:"jpanel-hide-top",BOTTOM:"jpanel-hide-bottom"},ANIMATE:{DEFAULT:"jpanel-animate",FAST:"jpanel-animate-fast"},DISPLAY_NONE:"jpanel-display-none"},b={ROOT:"."+a.ROOT,NODE:"."+a.NODE,TRANSITION:"."+a.TRANSITION},c={ROOT:"jp-root",INITIALIZE_ON:"jp-initialize-on",SLIDE_AXIS:"jp-slide-axis",INITIAL_POSITION:"jp-initial-position",GROUP_IN_DEVICE:"jp-group-in-device",TRANSITION_TIMER:"jp-transition-timer",GO_TO:"jp-go-to"},d=function(b){var c=b,e=this;this.$=b,this.find=function(a,b){b=b||c;var e=b.querySelectorAll(a)[0];return e?new d(e):null},this.next=function(b){var f=c,g=b||a.NODE;do f=f.nextSibling;while(f&&1!==f.nodeType&&e.hasClass(g,f)===!1);return f?new d(f):null},this.data=function(a,b,d){return d=d||c,a="data-"+a,void 0===b?d.getAttribute(a)||"":void d.setAttribute(a,b)},this.addClass=function(a,b){b=b||c,b.classList?b.classList.add(a):b.className+=" "+a},this.removeClass=function(a,b){b=b||c,b.classList?b.classList.remove(a):b.className=b.className.replace(new RegExp("(^|\\b)"+a.split(" ").join("|")+"(\\b|$)","gi")," ")},this.hasClass=function(a,b){return b=b||c,b.classList?b.classList.contains(a):new RegExp("(^| )"+a+"( |$)","gi").test(b.className)},this.matches=function(a,b){b=b||c;var d=b.matches||b.matchesSelector||b.msMatchesSelector||b.mozMatchesSelector||b.webkitMatchesSelector||b.oMatchesSelector;if(d)return d.call(b,a);for(var e=b.parentNode.querySelectorAll(a),f=e.length;f--;)if(e[f]===b)return!0;return!1},this.on=function(a,b){function d(a){var d=g?e.matches(g,a.target):!0;d&&b.call(c,a)}var f=[].slice.call(arguments);if(3===f.length){var g=arguments[1];b=arguments[2]}c.addEventListener?c.addEventListener(a,d):c.attachEvent("on"+a,d)},this.flushCSS=function(){c.offsetHeight}},e=function(b,d){function e(){i.depth=+i.parent.depth+1}function f(){i.groupInDevice="desktop"==b.data(c.GROUP_IN_DEVICE)?"desktop":"mobile"}function g(){i.slideAxis=b.data(c.SLIDE_AXIS).match(/^y$/i)?"y":"y"==i.parent.slideAxis?"y":"x"}function h(){i.initialPosition="y"==i.slideAxis?"top":"right",i.id>0&&b.addClass(a.HIDE.PREFIX+i.initialPosition)}var i=this;this.id=0,this.$=b,this.next=null,this.prev=null,this.parent=d||null,this.panel=null,this.init=function(){e(),f(),g(),h()},this.transitionContents=function(a){return"desktop"==i.groupInDevice?a:"mobile"==i.groupInDevice?!a:!1},this.show=function(){b.removeClass(a.HIDE.LEFT),b.removeClass(a.HIDE.RIGHT),b.removeClass(a.HIDE.TOP),b.removeClass(a.HIDE.BOTTOM)},this.hide=function(c){switch(i.initialPosition){case"top":b.addClass(c?a.HIDE.BOTTOM:a.HIDE.TOP);break;case"left":b.addClass(c?a.HIDE.RIGHT:a.HIDE.LEFT);break;case"bottom":b.addClass(c?a.HIDE.TOP:a.HIDE.BOTTOM);break;default:b.addClass(c?a.HIDE.LEFT:a.HIDE.RIGHT)}},this.prepareForTransition=function(c){b.addClass(a.DISPLAY_NONE),this.show(),b.flushCSS(),this.hide(!c),b.flushCSS(),b.removeClass(a.DISPLAY_NONE),b.flushCSS()}},f=function(d){function e(){k.initializeOn=d.data(c.INITIALIZE_ON)||"immediate"}function f(){k.slideAxis=d.data(c.SLIDE_AXIS).match(/^y$/i)?"y":"x"}function g(){k.transitionTimer=+d.data(c.TRANSITION_TIMER)||0}function h(){k.transitionTimer>0?k.timer=setInterval(k.next,k.transitionTimer):d.on("click",b.TRANSITION,function(a){var b=k.$.data(c.GO_TO,void 0,a.target);b.match(/^prev$/i)?k.prev():k.next()})}function j(a){var b="next"==a;a=b?"next":"prev",k.panel.panel&&k.panel.panel[a]&&("desktop"===k.panel.groupInDevice&&i()===!0||"mobile"===k.panel.groupInDevice&&i()===!1)?(k.panel.panel[a].prepareForTransition(b),k.panel.panel.hide(b),k.panel.panel[a].show(),k.panel.panel=k.panel.panel[a]):k.panel[a]?(k.panel[a].prepareForTransition(b),k.panel.hide(b),k.panel[a].show(),k.panel=k.panel[a]):!function(a){k[a].prepareForTransition(b),k.panel.hide(b),k[a].show(),k.panel=k[a]}(b?"firstPanel":"lastPanel")}var k=this;this.panel=null,this.firstPanel=null,this.lastPanel=null,this.depth=0,this.$=d,this.init=function(){e(),f(),g(),h()},this.setAnimation=function(){d.addClass(a.ANIMATE.DEFAULT)},this.removeAnimation=function(){d.removeClass(a.ANIMATE.DEFAULT)},this.next=function(){j("next")},this.prev=function(){j("prev")}},g={timerID:0,timers:[],add:function(a){this.timers.push(a)},start:function(){this.timerID||!function a(){if(g.timers.length>0){for(var b=0;b<g.timers.length;b++)void 0===g.timers[b]()&&(g.timers.splice(b,1),b--);g.timerID=setTimeout(a,0)}}()},stop:function(){clearTimeout(this.timerID),this.timerID=0}},h=function(){function h(c){c.panel=function d(f,g){f.id=g?g.id+1:0,f.init();var h=f.$.next(a.NODE);f.prev=g,f.next=h?new e(h,f.parent):null;var i=f.$.find(b.NODE)||null;if(i&&(f.panel=d(new e(i,f),null)),null===f.next){for(c.lastPanel=f;null!==f.prev;){if(f.prev.depth!==f.depth)return c.firstPanel=f,f;f=f.prev}return c.firstPanel=f,f}return d(f.next,f)}(new e(c.$.find(b.NODE),c),null)}var i=this;this.root={},this.init=function(){function a(a){g.add(function(){a.init(),h(a),a.$.flushCSS(),a.setAnimation()})}var e=document.querySelectorAll(b.ROOT),j=0;if(0===e.length)return!1;for(var k in e)if(e.hasOwnProperty(k)&&"length"!=k){var l=new d(e[k]),m=l.data(c.ROOT)||j++;i.root[m]&&(m+=j),i.root[m]=new f(l),a(i.root[m])}g.start()},this.initializeOn=function(a){var b={immediate:function(){},onLoad:function(){},onRender:function(){},custom:function(){}};b[a]?b[a]():b.immediate()}},i=function(){document.body.insertAdjacentHTML("afterend",'<span id="jpanel-mobile-check"></span>');var a=document.getElementById("jpanel-mobile-check");return function(){return window.getComputedStyle?2===+window.getComputedStyle(a,null).getPropertyValue("z-index"):a.currentStyle?2===+a.currentStyle.zIndex:void 0}}();window.Jpanel=new h,window.Jpanel.init(),window.Jpanel.isMobile=i}();