/**!
 * jPanel v0.2.0
 * Copyright (c) 2015 Jonathan Perez.
 * Licensed under the MIT License.
 */
!function(){function a(a){a.panel=function d(e,f){e.id=f?f.id+1:0,e.init();var g=e.$.next(b.NODE);e.prev=f,e.next=g?new j(g,e.parent):null;var h=e.$.find(c.NODE)||null;if(h&&(e.panel=d(new j(h,e),null)),null===e.next){for(a.lastPanel=e;null!==e.prev;){if(e.prev.depth!==e.depth)return a.firstPanel=e,e;e=e.prev}return a.firstPanel=e,e}return d(e.next,e)}(new j(a.$.find(c.NODE),a),null)}var b={ROOT:"jpanel-root",NODE:"jpanel-node",TRANSITION:"jpanel-transition",HIDE:{PREFIX:"jpanel-hide-",LEFT:"jpanel-hide-left",RIGHT:"jpanel-hide-right",TOP:"jpanel-hide-top",BOTTOM:"jpanel-hide-bottom"},ANIMATE:{DEFAULT:"jpanel-animate",FAST:"jpanel-animate-fast"},DISPLAY_NONE:"jpanel-display-none"},c={ROOT:"."+b.ROOT,NODE:"."+b.NODE,TRANSITION:"."+b.TRANSITION},d={ROOT:"jp-root",INITIALIZE_ON:"jp-initialize-on",SLIDE_AXIS:"jp-slide-axis",INITIAL_POSITION:"jp-initial-position",GROUP_IN_DEVICE:"jp-group-in-device",TRANSITION_TIMER:"jp-transition-timer",GO_TO:"jp-go-to"},e=window.document,f={timerID:0,timers:[],add:function(a){this.timers.push(a)},start:function(){if(!this.timerID){var a=this;!function b(){if(a.timers.length>0){for(var c=0;c<a.timers.length;c++)void 0===a.timers[c]()&&(a.timers.splice(c,1),c--);a.timerID=setTimeout(b,0)}}()}},stop:function(){clearTimeout(this.timerID),this.timerID=0}},g="0.2.0",h=function(){};h.fn=h.prototype={jpanel:g,constructor:h,modules:[]},h.extend=h.fn.extend=function(a){var b,c,d;if(null!==a)for(b in a)c=this[b],d=a[b],this!==d&&void 0!==d&&(this[b]=d);return this},h.extend({root:{}});var i=function(a){var c=a,d=this;this.$=a,this.find=function(a,b){b=b||c;var d=b.querySelector(a);return d?new i(d):null},this.next=function(a){var e=c,f=a||b.NODE;do e=e.nextSibling;while(e&&1!==e.nodeType&&d.hasClass(f,e)===!1);return e&&d.hasClass(f,e)?new i(e):null},this.data=function(a,b,d){return d=d||c,a="data-"+a,void 0===b?d.getAttribute(a)||"":void d.setAttribute(a,b)},this.addClass=function(a,b){b=b||c,b.classList?b.classList.add(a):b.className+=" "+a},this.removeClass=function(a,b){b=b||c,b.classList?b.classList.remove(a):b.className=b.className.replace(new RegExp("(^|\\b)"+a.split(" ").join("|")+"(\\b|$)","gi")," ")},this.hasClass=function(a,b){return b=b||c,b.classList?b.classList.contains(a):new RegExp("(^| )"+a+"( |$)","gi").test(b.className)},this.matches=function(a,b){b=b||c;var d=b.matches||b.matchesSelector||b.msMatchesSelector||b.mozMatchesSelector||b.webkitMatchesSelector||b.oMatchesSelector;if(d)return d.call(b,a);for(var e=b.parentNode.querySelectorAll(a),f=e.length;f--;)if(e[f]===b)return!0;return!1},this.on=function(a,b){function e(a){var e=g?d.matches(g,a.target):!0;e&&b.call(c,a)}var f=[].slice.call(arguments);if(3===f.length){var g=arguments[1];b=arguments[2]}c.addEventListener?c.addEventListener(a,e):c.attachEvent("on"+a,e)},this.flushCSS=function(){c.offsetHeight}},j=function(a,c){function e(){i.depth=+i.parent.depth+1}function f(){i.groupInDevice="desktop"==a.data(d.GROUP_IN_DEVICE)?"desktop":"mobile"}function g(){i.slideAxis=a.data(d.SLIDE_AXIS).match(/^y$/i)?"y":"y"==i.parent.slideAxis?"y":"x"}function h(){i.initialPosition="y"==i.slideAxis?"top":"right",i.id>0&&a.addClass(b.HIDE.PREFIX+i.initialPosition)}var i=this;this.id=0,this.$=a,this.next=null,this.prev=null,this.parent=c||null,this.panel=null,this.init=function(){e(),f(),g(),h()},this.transitionContents=function(a){return"desktop"==i.groupInDevice?a:"mobile"==i.groupInDevice?!a:!1},this.show=function(){a.removeClass(b.HIDE.LEFT),a.removeClass(b.HIDE.RIGHT),a.removeClass(b.HIDE.TOP),a.removeClass(b.HIDE.BOTTOM)},this.hide=function(c){switch(i.initialPosition){case"top":a.addClass(c?b.HIDE.BOTTOM:b.HIDE.TOP);break;case"left":a.addClass(c?b.HIDE.RIGHT:b.HIDE.LEFT);break;case"bottom":a.addClass(c?b.HIDE.TOP:b.HIDE.BOTTOM);break;default:a.addClass(c?b.HIDE.LEFT:b.HIDE.RIGHT)}},this.prepareForTransition=function(c){a.addClass(b.DISPLAY_NONE),this.show(),a.flushCSS(),this.hide(!c),a.flushCSS(),a.removeClass(b.DISPLAY_NONE),a.flushCSS()}},k=window.getComputedStyle,l=h.isMobile=function(){e.body.insertAdjacentHTML("afterend",'<span id="jpanel-mobile-check"></span>');var a=e.getElementById("jpanel-mobile-check");return function(){return k?2===+k(a,null).getPropertyValue("z-index"):a.currentStyle?2===+a.currentStyle.zIndex:void 0}}(),m=function(a){function e(){j.initializeOn=a.data(d.INITIALIZE_ON)||"immediate"}function f(){j.slideAxis=a.data(d.SLIDE_AXIS).match(/^y$/i)?"y":"x"}function g(){j.transitionTimer=+a.data(d.TRANSITION_TIMER)||0}function h(){j.transitionTimer>0?j.timer=setInterval(j.next,j.transitionTimer):a.on("click",c.TRANSITION,function(a){var b=j.$.data(d.GO_TO,void 0,a.target);b.match(/^prev$/i)?j.prev():j.next()})}function i(a){var b="next"==a;a=b?"next":"prev",j.panel.panel&&j.panel.panel[a]&&("desktop"===j.panel.groupInDevice&&l()===!0||"mobile"===j.panel.groupInDevice&&l()===!1)?(j.panel.panel[a].prepareForTransition(b),j.panel.panel.hide(b),j.panel.panel[a].show(),j.panel.panel=j.panel.panel[a]):j.panel[a]?(j.panel[a].prepareForTransition(b),j.panel.hide(b),j.panel[a].show(),j.panel=j.panel[a]):!function(a){j[a].prepareForTransition(b),j.panel.hide(b),j[a].show(),j.panel=j[a]}(b?"firstPanel":"lastPanel")}var j=this;this.panel=null,this.firstPanel=null,this.lastPanel=null,this.depth=0,this.$=a,this.init=function(){e(),f(),g(),h()},this.setAnimation=function(){a.addClass(b.ANIMATE.DEFAULT)},this.removeAnimation=function(){a.removeClass(b.ANIMATE.DEFAULT)},this.next=function(){i("next")},this.prev=function(){i("prev")}};h.extend({init:function(){function b(b){f.add(function(){b.init(),a(b),b.$.flushCSS(),b.setAnimation()})}var g=e.querySelectorAll(c.ROOT),h=0;if(0===g.length)return!1;for(var j in g)if(g.hasOwnProperty(j)&&"length"!=j){var k=new i(g[j]),l=k.data(d.ROOT)||h++;this.root[l]&&(l+=h),this.root[l]=new m(k),b(this.root[l])}f.start()},initializeOn:function(a){var b={immediate:function(){},load:function(){},render:function(){},custom:function(){}};b[a]?b[a]():b.immediate()}}),h.init(),"function"==typeof define&&define.amd?define(function(){return h}):window.jPanel=h}();